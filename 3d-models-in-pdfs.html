<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Billy McCulloch" />
        <meta name="copyright" content="Billy McCulloch" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="3d, pdf, embed, cif, crystallography, crystallography, " />

<meta property="og:title" content="3D Models in PDFs "/>
<meta property="og:url" content="http://bjmcculloch.github.io/3d-models-in-pdfs.html" />
<meta property="og:description" content="I&#39;ve had this idea for quite some time now: I would like to be able to incorporate interactive 3D figures of crystallographic models in my PDFs. It started when I was reading about Asymptote, a vector graphics package with the ability to embed 3D models in PDFs. I set ..." />
<meta property="og:site_name" content="Organometallic Odyssey" />
<meta property="og:article:author" content="Billy McCulloch" />
<meta property="og:article:published_time" content="2001-12-01T09:17:00" />
<meta name="twitter:title" content="3D Models in PDFs ">
<meta name="twitter:description" content="I&#39;ve had this idea for quite some time now: I would like to be able to incorporate interactive 3D figures of crystallographic models in my PDFs. It started when I was reading about Asymptote, a vector graphics package with the ability to embed 3D models in PDFs. I set ...">

        <title>3D Models in PDFs  · Organometallic Odyssey
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://bjmcculloch.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://bjmcculloch.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://bjmcculloch.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://bjmcculloch.github.io/theme/css/custom.css" media="screen">
        <link href="http://bjmcculloch.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Organometallic Odyssey - Full Atom Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-51266943-1', 'auto');
    ga('send', 'pageview');
</script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <div class="span1"></div>
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://bjmcculloch.github.io/"><span class=site-name>Organometallic Odyssey</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://bjmcculloch.github.io">Home</a></li>
                            <li ><a href="http://bjmcculloch.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://bjmcculloch.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://bjmcculloch.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://bjmcculloch.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://bjmcculloch.github.io/3d-models-in-pdfs.html"> 3D Models in PDFs  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>I've had this idea for quite some time now: I would like to be able to
incorporate interactive 3D figures of crystallographic models in my PDFs. It
started when I was reading about <a href="http://asymptote.sourceforge.net/">Asymptote</a>, a vector graphics package with the
ability to embed 3D models in PDFs. I set out to write a program/script to turn
a CIF into Asymptote code. Fortunately, I've since run across some <a href="http://www.citeulike.org/user/bjmcculloch/tag/3d">other people
with similar ambitions</a>, so I'm using their experience as guidance, and I will be
documenting my ideas here.</p>
<h1 id="file-formats">File Formats</h1>
<h2 id="cif">CIF</h2>
<p>The standard format for small-molecule crystallographic models, this is the
universal starting point</p>
<h2 id="mmcif">mmCIF</h2>
<p>A standard format for macromolecular crystallographic models. This is a
reasonable intermediate, because there appear to be a swath of tools available
to convert this into other useful formats.</p>
<h2 id="pdb">PDB</h2>
<p>Another, very common, format for macromolecular models. Can be as simple as a
list of XYZ coordinates, or can include more details, such as unit cell
dimensions and thermal displacement parameters. Very human-readable, simple text
based system.</p>
<h2 id="vrml-x3d">VRML / X3D</h2>
<p>The original web standard for 3D content. Has fallen somewhat by the wayside on
the web, but has become a catch-all file format for a 3D programs.</p>
<p>The proposed replacement for VRML, X3D is XML-based.</p>
<p><a href="http://www.web3d.org/x3d/">X3D/VRML Resources</a></p>
<h2 id="u3d">U3D</h2>
<p>U3D is also XML-based, and has been around longer. I don't know why it's not the
"new VRML" format. This is the format Adobe PDF readers expect to see for
embedded 3D objects. (<a href="http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-363%204th%20Edition.pdf">U3D File Format
Specification</a>)</p>
<h2 id="pdf">PDF</h2>
<p>Of course, this is the standard document exchange format. This is the target
system which we would like to embed out graphics in.</p>
<h1 id="programs">Programs</h1>
<h2 id="pymol"><a href="http://www.pymol.org/">PyMOL</a></h2>
<h2 id="jmol">jMOL</h2>
<h2 id="mercury">Mercury</h2>
<p>Mercury is capable of converting CIF files to PDB files, while retaining the
data pertinent to an accurate 3D model (a, b, c, α, β, γ, Uij, etc…)!</p>
<h2 id="xj3d"><a href="http://www.xj3d.org/">Xj3D</a></h2>
<h2 id="asymptote">Asymptote</h2>
<h2 id="latex">LaTeX</h2>
<h2 id="adobe-reader">Adobe Reader</h2>
<h2 id="sf-convert">sf-convert</h2>
<h2 id="maxit">maxit</h2>
<h2 id="meshlab"><a href="http://meshlab.sourceforge.net/">MeshLab</a></h2>
<p>Meshlab can convert VRML or X3D to U3D, which is what Adobe uses for PDFs.</p>
<h2 id="drawxtl">DRAWxtl</h2>
<p>DRAWxtl can import a CIF and export a VRML file with all the thermal ellipsoids
intact! It's a bit clunky to use, though.</p>
<h2 id="diamond">Diamond</h2>
<p>Diamond can also import CIFs and export VRML with all thermal ellipsoids intact!
It's commercial software, but available in a demo form that does not restrict
your ability to export VRML. Probably the best
<a href="http://en.wikipedia.org/wiki/Commercial_off-the-shelf">COTS</a> solution.</p>
<h2 id="x3d-edit">X3D-Edit</h2>
<p>X3D-Edit is usable as a VRML/X3D conversion tool, as well as a validator. It's a
program written by the man who literally wrote the book on X3D.</p>
<h1 id="workflows">Workflows</h1>
<h2 id="pymol-meshlab-movie15">PyMOL → MeshLab → movie15</h2>
<p>This doesn't work because PyMOL, for whatever reason, will not save the
ellipsoids in the exported VRML document (or in POV-Ray documents, either).
Also, MeshLab doesn't like the VRML format that PyMOL makes, anyway. Xj3D, on
the other hand, has no issues with opening/converting these files. However, even
if you use Xj3D to convert from VRML to X3D, MeshLab will still complain.</p>
<p>Convert from CIF to VRML
Open the CIF in PyMOL
show ellipsoids
save filename.wrl
Convert from VRML to U3D
Open the VRML 2 (.wrl) document in MeshLab
File → Save As… → U3D
Embed the U3D document using the
<a href="http://www.ctan.org/tex-archive/macros/latex/contrib/movie15">movie15</a>  package (<a href="http://pages.uoregon.edu/noeckel/PDFmovie.html">concise instructions</a>)</p>
<h2 id="vtk-meshlab-movie15">VTK → MeshLab → movie15</h2>
<p>Nearly identical to the above, but find an app that uses
<a href="http://www.vtk.org/">VTK</a> to display a CIF.</p>
<h2 id="mercury-pov-ray-custom-script">Mercury → POV-Ray → Custom Script</h2>
<p>This was one of my original ideas: use Mercury's ability to export POV-Ray
scenes to generate an input file that can be readily translated into Asymptote
code. Right now, this isn't looking so bad…</p>
<h2 id="cif-pdb-vrml-u3d">CIF → PDB → VRML → U3D</h2>
<p>Use Mercury to convert from CIF to PDB. Make a (Python?) script to turn that
into an VRML model. Then MeshLab can convert the VRML to U3D. I'm guessing that
VRML will likely be easier to implement, but X3D or even U3D could probably be
implemented as well. This appears to be the route of choice.</p>
            
            <section>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                href="http://bjmcculloch.github.io/3d-models-in-pdfs.html#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
                    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'organometallicodyssey';
        var disqus_identifier = 'http://bjmcculloch.github.io/3d-models-in-pdfs.html';
    var disqus_url = 'http://bjmcculloch.github.io/3d-models-in-pdfs.html';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                </div>
            </div>
        </div>
    </div>
</div>
</section>

            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2001-12-01T09:17:00">Dec 1, 2001</time>
            <h4>Category</h4>
            <a class="category-link" href="http://bjmcculloch.github.io/categories.html#crystallography-ref">crystallography</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://bjmcculloch.github.io/tags.html#3d-ref">3d
                    <span>1</span>
</a></li>
                <li><a href="http://bjmcculloch.github.io/tags.html#cif-ref">cif
                    <span>1</span>
</a></li>
                <li><a href="http://bjmcculloch.github.io/tags.html#crystallography-ref">crystallography
                    <span>4</span>
</a></li>
                <li><a href="http://bjmcculloch.github.io/tags.html#embed-ref">embed
                    <span>1</span>
</a></li>
                <li><a href="http://bjmcculloch.github.io/tags.html#pdf-ref">pdf
                    <span>1</span>
</a></li>
            </ul>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

            <script type="text/javascript">
var disqus_shortname = 'organometallicodyssey';
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
<script  language="javascript" type="text/javascript">
function uncollapse() {
    if (window.location.hash.match(/^#comment-\d+$/)) {
        $('#disqus_thread').collapse('show');
    }
}
</script>
<script type="text/javascript" language="JavaScript">
uncollapse();
window.onhashchange=function(){
    if (window.location.hash.match(/^#comment-\d+$/))
        window.location.reload(true);
}
</script>
<script>
$('#disqus_thread').on('shown', function () {
    var link = document.getElementsByClassName('accordion-toggle');
    var old_innerHTML = link[0].innerHTML;
    $(link[0]).fadeOut(500, function() {
        $(this).text('Click here to hide comments').fadeIn(500);
    });
    $('#disqus_thread').on('hidden', function () {
        $(link[0]).fadeOut(500, function() {
            $(this).text(old_innerHTML).fadeIn(500);
        });
    })
})
</script>


    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>